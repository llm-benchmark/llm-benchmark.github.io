<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reasoning Models Evaluation</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Keep all the existing CSS styles */
        :root {
            --primary-color: #6860FF;
            --primary-light: #f9f9ff;
            --success-bg: #e6ffe6;
            --success-color: #008000;
            --good-bg: #e6f7ff;
            --good-color: #0066cc;
            --partial-bg: #fffde6;
            --partial-color: #b3a600;
            --poor-bg: #fff0e6;
            --poor-color: #cc5500;
            --wrong-bg: #ffe6e6;
            --wrong-color: #cc0000;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: var(--primary-light);
        }
        
        h1, h2, h3 {
            color: #222;
            font-weight: 600;
        }
        
        .container {
            background-color: white;
            border-radius: 12px;
            padding: 40px;
            box-shadow: 0 2px 20px rgba(0,0,0,0.05);
        }
        
        .page-title {
            font-size: 2.5rem;
            margin-bottom: 20px;
            color: #111;
            text-align: center;
        }
        
        .intro-text {
            text-align: center;
            font-size: 1.1rem;
            max-width: 800px;
            margin: 0 auto 30px;
            color: #555;
            line-height: 1.6;
        }
        
        .subtitle {
            font-size: 1.8rem;
            margin: 40px 0 20px;
            color: #111;
            text-align: center;
        }
        
        .scales-container {
            display: flex;
            gap: 30px;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }
        
        .scale-box {
            flex: 1;
            min-width: 300px;
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }
        
        .scale-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 15px;
            color: #333;
            text-align: center;
        }
        
        .scale-item {
            display: flex;
            margin-bottom: 12px;
            align-items: flex-start;
        }
        
        .scale-color {
            font-size: 1.2rem;
            margin-right: 10px;
            line-height: 1;
            width: 1.2rem; /* 确保圆圈宽度一致 */
            text-align: center; /* 圆圈居中对齐 */
        }
        
        .scale-label {
            font-weight: 600;
            margin-right: 8px;
            min-width: 60px;
            text-align: left; /* 左对齐标签 */
        }
        
        .scale-desc {
            font-size: 0.9rem;
            color: #555;
            flex: 1;
        }
        
        /* 计算器样式 */
        .calculator {
            background: white;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 40px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }
        
        .calculator h2 {
            font-size: 1.4rem;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .calculator-form {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            align-items: center;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .calculator input {
            padding: 8px 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 1rem;
            width: 120px;
        }
        
        .calculator button {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 8px 20px;
            border-radius: 6px;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .calculator button:hover {
            background: #5048e0;
        }
        
        .result {
            background: #f9f9ff;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
        }
        
        .result.visible {
            display: block;
        }
        
        .calc-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        .calc-table th, .calc-table td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: left;
        }
        
        .calc-table th {
            background-color: #f5f5ff;
            font-weight: 600;
        }
        
        /* 模型统计部分 */
        .stats-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 40px;
            justify-content: center;
        }
        
        .model-stat {
            background: white;
            border-radius: 10px;
            padding: 18px 25px;
            min-width: 180px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            position: relative;
            overflow: hidden;
            transition: transform 0.2s;
        }
        
        .model-stat:hover {
            transform: translateY(-3px);
        }
        
        .model-stat .model-name {
            font-size: 0.9rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 8px;
        }
        
        .model-stat .accuracy {
            font-size: 1.6rem;
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .model-stat .ratio {
            font-size: 0.8rem;
            color: #888;
        }
        
        .model-stat .rank {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #f0f0f0;
            border-radius: 20px;
            padding: 3px 10px;
            font-size: 0.75rem;
            font-weight: 700;
        }
        
        .rank-1st {
            background: gold;
            color: #333;
        }
        
        .rank-2nd {
            background: silver;
            color: #333;
        }
        
        .rank-3rd {
            background: #cd7f32;
            color: white;
        }
        
        /* 根据准确率进行颜色编码（100% 到 0%，每 5% 一个级别） */
        .stat-100 {
            background: linear-gradient(145deg, #e6ffe6, #f8fff8);
            border-left: 4px solid var(--success-color);
        }
        .stat-95-99 {
            background: linear-gradient(145deg, #e6ffe6, #f4fff4);
            border-left: 4px solid var(--success-color);
        }
        .stat-90-94 {
            background: linear-gradient(145deg, #e6ffe6, #f0fff0);
            border-left: 4px solid var(--success-color);
        }
        .stat-85-89 {
            background: linear-gradient(145deg, #e6faff, #f8faff);
            border-left: 4px solid var(--good-color);
        }
        .stat-80-84 {
            background: linear-gradient(145deg, #e6f7ff, #f0f7ff);
            border-left: 4px solid var(--good-color);
        }
        .stat-75-79 {
            background: linear-gradient(145deg, #f0faff, #e8f7ff);
            border-left: 4px solid var(--good-color);
        }
        .stat-70-74 {
            background: linear-gradient(145deg, #fffde6, #fffef0);
            border-left: 4px solid var(--partial-color);
        }
        .stat-65-69 {
            background: linear-gradient(145deg, #fffde6, #fff8e0);
            border-left: 4px solid var(--partial-color);
        }
        .stat-60-64 {
            background: linear-gradient(145deg, #fff5d6, #fff8e0);
            border-left: 4px solid var(--partial-color);
        }
        .stat-55-59 {
            background: linear-gradient(145deg, #fff0e6, #fff8f5);
            border-left: 4px solid var(--poor-color);
        }
        .stat-50-54 {
            background: linear-gradient(145deg, #fff0e6, #fff4eb);
            border-left: 4px solid var(--poor-color);
        }
        .stat-45-49 {
            background: linear-gradient(145deg, #ffe8e0, #fff0e6);
            border-left: 4px solid var(--poor-color);
        }
        .stat-40-44 {
            background: linear-gradient(145deg, #ffe6e6, #fff5f5);
            border-left: 4px solid var(--wrong-color);
        }
        .stat-35-39 {
            background: linear-gradient(145deg, #ffe6e6, #fff0f0);
            border-left: 4px solid var(--wrong-color);
        }
        .stat-30-34 {
            background: linear-gradient(145deg, #ffe0e0, #ffebeb);
            border-left: 4px solid var(--wrong-color);
        }
        .stat-25-29 {
            background: linear-gradient(145deg, #ffd6d6, #ffe6e6);
            border-left: 4px solid var(--wrong-color);
        }
        .stat-20-24 {
            background: linear-gradient(145deg, #ffcccc, #ffd9d9);
            border-left: 4px solid var(--wrong-color);
        }
        .stat-15-19 {
            background: linear-gradient(145deg, #ffc2c2, #ffcece);
            border-left: 4px solid var(--wrong-color);
        }
        .stat-10-14 {
            background: linear-gradient(145deg, #ffb8b8, #ffc5c5);
            border-left: 4px solid var(--wrong-color);
        }
        .stat-5-9 {
            background: linear-gradient(145deg, #ffadad, #ffbaba);
            border-left: 4px solid var(--wrong-color);
        }
        .stat-1-4 {
            background: linear-gradient(145deg, #ffa3a3, #ffb0b0);
            border-left: 4px solid var(--wrong-color);
        }
        .stat-0 {
            background: linear-gradient(145deg, #ff9999, #ffa6a6);
            border-left: 4px solid var(--wrong-color);
        }

        
        .puzzle-container {
            margin-bottom: 30px;
            border: 1px solid #eeeeff;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0,0,0,0.02);
        }
        
        .puzzle-header {
            background-color: #f5f5ff;
            padding: 18px 25px;
            cursor: pointer;
            font-weight: 600;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background-color 0.2s;
        }
        
        .puzzle-header:hover {
            background-color: #efeff8;
        }
        
        .difficulty-label {
            font-size: 0.85rem;
            padding: 5px 12px;
            border-radius: 20px;
            font-weight: 500;
            margin-left: 15px;
        }
        
        /* 增强的难度颜色渐变 */
        .difficulty-0-1 { background-color: #ffffff; color: #333333; border: 1px solid #eeeeee; }
        .difficulty-0-2 { background-color: #f8fcf8; color: #1a601a; }
        .difficulty-0-3 { background-color: #f2f9f2; color: #1a601a; }
        .difficulty-0-4 { background-color: #ebf6eb; color: #1a601a; }
        .difficulty-0-5 { background-color: #e9f5e9; color: #1a601a; }
        .difficulty-0-6 { background-color: #e6f4e6; color: #1a601a; }
        .difficulty-0-7 { background-color: #e3f3e3; color: #1a601a; }
        .difficulty-0-8 { background-color: #e0f2e0; color: #1a601a; }
        .difficulty-0-9 { background-color: #ddf1dd; color: #1a601a; }

        .difficulty-1-0 { background-color: #daefda; color: #1a601a; }
        .difficulty-1-1 { background-color: #d5edd5; color: #1a601a; }
        .difficulty-1-2 { background-color: #d0ecd0; color: #1a601a; }
        .difficulty-1-3 { background-color: #cbeacb; color: #1a601a; }
        .difficulty-1-4 { background-color: #c6e9c6; color: #1a601a; }
        .difficulty-1-5 { background-color: #c1e7c1; color: #1a601a; }
        .difficulty-1-6 { background-color: #bce5bc; color: #1a601a; }
        .difficulty-1-7 { background-color: #b7e4b7; color: #1a601a; }
        .difficulty-1-8 { background-color: #b2e2b2; color: #1a601a; }
        .difficulty-1-9 { background-color: #ade1ad; color: #1a601a; }

        .difficulty-2-0 { background-color: #a8dfa8; color: #1a601a; }
        .difficulty-2-1 { background-color: #a5d6b1; color: #0055aa; }
        .difficulty-2-2 { background-color: #a2ceba; color: #0055aa; }
        .difficulty-2-3 { background-color: #9fc5c3; color: #0055aa; }
        .difficulty-2-4 { background-color: #9cbdcc; color: #0055aa; }
        .difficulty-2-5 { background-color: #99b4d5; color: #0055aa; }
        .difficulty-2-6 { background-color: #96abde; color: #0044aa; }
        .difficulty-2-7 { background-color: #93a3e7; color: #0044aa; }
        .difficulty-2-8 { background-color: #909af0; color: #0044aa; }
        .difficulty-2-9 { background-color: #8d91f9; color: #0044aa; }

        .difficulty-3-0 { background-color: #8a88ff; color: #0044aa; }
        .difficulty-3-5 { background-color: #9f89ef; color: #502080; }

        .difficulty-4-0 { background-color: #b48add; color: #502080; }
        .difficulty-4-5 { background-color: #ce8dbc; color: #502080; }
        
        .difficulty-5-0 { background-color: #e8a49b; color: #806000; }
        .difficulty-5-5 { background-color: #f5b87a; color: #806000; }
        
        .difficulty-6-0 { background-color: #ffcc5a; color: #804000; }
        .difficulty-6-5 { background-color: #ffbb55; color: #804000; }
        
        .difficulty-7-0 { background-color: #ffaa66; color: #804000; }
        .difficulty-7-5 { background-color: #ff9977; color: #804000; }
        
        .difficulty-8-0 { background-color: #ff8888; color: #800000; }
        .difficulty-8-5 { background-color: #ed8080; color: #800000; }
        
        .difficulty-9-0 { background-color: #db7878; color: #601000; }
        .difficulty-9-5 { background-color: #c97070; color: #601000; }
        
        .difficulty-10-0 { background-color: #b76868; color: #601000; }
        
        .puzzle-content {
            padding: 0;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-out, padding 0.3s ease-out;
        }
        
        .puzzle-content.expanded {
            padding: 25px;
            max-height: 3000px;
        }
        
        .question {
            margin-bottom: 25px;
        }
        
        .question-preview {
            background-color: #f9f9ff;
            padding: 20px;
            border-radius: 8px;
            cursor: pointer;
            margin-bottom: 15px;
        }
        
        .question-preview p {
            margin: 0;
            font-style: italic;
            color: #444;
            font-size: 1.05rem;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .see-more {
            font-size: 0.9rem;
            color: var(--primary-color);
            display: block;
            margin-top: 5px;
            text-align: right;
        }
        
        /* 模态框样式 */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s, visibility 0.3s;
        }
        
        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        .modal-content {
            background: white;
            border-radius: 12px;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 25px;
            box-shadow: 0 5px 30px rgba(0, 0, 0, 0.15);
            position: relative;
            transform: translateY(20px);
            transition: transform 0.3s;
        }
        
        .modal-overlay.active .modal-content {
            transform: translateY(0);
        }
        
        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.5rem;
            cursor: pointer;
            color: #888;
            background: none;
            border: none;
            padding: 0;
        }
        
        .modal-title {
            font-size: 1.4rem;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .model-answers {
            display: flex;
            flex-wrap: wrap;
            gap: 25px;
        }
        
        .model-answer {
            flex: 1;
            min-width: 300px;
            border: 1px solid #eeeeff;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0,0,0,0.02);
        }
        
        .model-header {
            padding: 12px 20px;
            background-color: #f8f8ff;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background-color 0.2s;
        }
        
        .model-header:hover {
            background-color: #f0f0ff;
        }
        
        .evaluation {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            font-size: 0.9rem;
            padding: 5px 12px;
            border-radius: 20px;
            font-weight: 500;
        }
        
        .perfect {
            background-color: var(--success-bg);
            color: var(--success-color);
        }
        
        .good {
            background-color: var(--good-bg);
            color: var(--good-color);
        }
        
        .partial {
            background-color: var(--partial-bg);
            color: var(--partial-color);
        }
        
        .poor {
            background-color: var(--poor-bg);
            color: var(--poor-color);
        }
        
        .wrong {
            background-color: var(--wrong-bg);
            color: var(--wrong-color);
        }
        
        .download-options {
            text-align: right;
            margin-bottom: 40px;
        }
        
        .download-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 18px;
            border-radius: 6px;
            cursor: pointer;
            margin-left: 12px;
            text-decoration: none;
            display: inline-block;
            font-size: 0.95rem;
            font-weight: 500;
            transition: background-color 0.2s;
        }
        
        .download-btn:hover {
            background-color: #5048e0;
        }
        
        .pagination {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 40px;
        }
        
        .page-btn {
            padding: 8px 14px;
            border: 1px solid #ddd;
            background-color: white;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s;
        }
        
        .page-btn.active {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        .page-btn:hover:not(.active) {
            background-color: #f0f0f8;
            border-color: #d8d8ff;
        }
        
        .loading {
            text-align: center;
            padding: 30px;
            font-size: 1.2rem;
            color: #666;
        }
        .preserve-newlines {
          white-space: pre-wrap;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 25px 20px;
                border-radius: 8px;
            }
            
            .page-title {
                font-size: 2rem;
            }
            
            .subtitle {
                font-size: 1.5rem;
            }
            
            .puzzle-header {
                padding: 15px 20px;
            }
            
            .scales-container {
                flex-direction: column;
            }
            
            .model-answers {
                flex-direction: column;
            }
            
            .download-options {
                text-align: center;
            }
            
            .download-btn {
                margin: 5px;
                width: 150px;
            }
            
            .stats-container {
                flex-direction: column;
                align-items: center;
            }
            
            .model-stat {
                width: 100%;
                max-width: 300px;
            }
            
            .calculator-form {
                flex-direction: column;
                align-items: stretch;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="page-title">The Anti-Overfitting LLM Logical Reasoning Test Series</h1>
        
        <p class="intro-text">
            A series of simple questions that nonetheless pose serious challenges to LLMs, unlike common mathematical benchmarks (though those are dozens of times more difficult). These questions focus on testing models' genuine generalization and reasoning abilities, so we essentially want problems that challenge LLMs while remaining as easy as possible for humans.
        </p>

        <p class="intro-text">
            The difficulty level roughly matches the APOS scale, where level 1 corresponds to "difficulty 1" as noted in the linked resource. Note that levels 3-6 fall within the AIME (American Invitational Mathematics Examination) range, while levels 7-10 reach IMO (International Mathematical Olympiad) or Putnam competition difficulty.
        </p>

        <p class="intro-text">
            <a href="https://artofproblemsolving.com/wiki/index.php/AoPS_Wiki:Competition_ratings" target="_blank">https://artofproblemsolving.com/wiki/index.php/AoPS_Wiki:Competition_ratings</a>
        </p>

        <p class="intro-text">
            All model statistics shown have been tested (complete responses to be added later). Typically, accuracy rates below 20% are considered as scoring 0 points. If observable accuracy exists, scores are assigned based on the probability of correct answers and the quality of responses.
        </p>
        
        <!-- 难度和准确度说明 -->
        <div class="scales-container">
            <div class="scale-box">
                <h3 class="scale-title">Difficulty Scale</h3>
                <div id="difficulty-scale">
                    <!-- Will be populated from JSON -->
                    <div class="loading">Loading difficulty scale...</div>
                </div>
            </div>
            
            <div class="scale-box">
                <h3 class="scale-title">Answer Accuracy Scale</h3>
                <div id="accuracy-scale">
                    <!-- Will be populated from JSON -->
                    <div class="loading">Loading accuracy scale...</div>
                </div>
            </div>
        </div>
        <!--  calculator
        

        
        <div class="calculator">
            <h2>Task Time Standard Deviation Calculator</h2>
            <div class="calculator-form">
                <label for="taskTime">Task time (minutes):</label>
                <input type="number" id="taskTime" min="1" step="0.1" placeholder="Enter time">
                <button onclick="calculate()">Calculate</button>
            </div>
            
            <div class="result" id="calculatorResult">
                <p>Average human thinking time: <span id="avgTime"></span></p>
                <p>Standard deviation: <span id="stdDev"></span></p>
                <p>Model reasoning assessment score: <span id="modelScore"></span></p>
            </div>
            
            <p>The 'Time' column represents the difficulty level of problems that the model can reliably solve, based on how long it would take a human to solve them. Longer times indicate more difficult problems.The standard deviation indicates the percentage of STEM individuals who can successfully solve the problem, following a normal distribution reduction ratio. A standard deviation of 0 implies that nearly 100% of the STEM population can solve it. </p>
            
            <table class="calc-table">
                <tr>
                    <th>Model</th>
                    <th>Fraction</th>
                    <th>Time (min)</th>
                </tr>
                <tr>
                    <td>3.5 Sonnet/4o 0806</td>
                    <td>50</td>
                    <td></td>
                </tr>
                <tr>
                    <td>r1</td>
                    <td>68</td>
                    <td></td>
                </tr>
                <tr>
                    <td>gemini 2.5 pro</td>
                    <td>71</td>
                    <td>4</td>
                </tr>
                <tr>
                    <td>o1/o3 mh</td>
                    <td>75</td>
                    <td>7</td>
                </tr>
                <tr>
                    <td>Human average</td>
                    <td>90</td>
                    <td>43</td>
                </tr>
                <tr>
                    <td>stem people</td>
                    <td>105</td>
                    <td></td>
                </tr>
                <tr>
                    <td>IMO easy</td>
                    <td>115</td>
                    <td></td>
                </tr>
                <tr>
                    <td>IMO 3/6</td>
                    <td>130</td>
                    <td></td>
                </tr>
            </table>
        </div>
        
        -->
        <div class="download-options">
            <a href="#" class="download-btn" id="download-csv">Download CSV</a>
            <a href="#" class="download-btn" id="download-json">Download JSON</a>
        </div>
        
        <!-- 模型性能统计 -->
        <div class="stats-container" id="model-stats">
            <!-- Will be populated from JSON -->
            <div class="loading">Loading model statistics...</div>
        </div>
        
        <!-- Puzzle部分 -->
        <div id="puzzles-container">
            <!-- Will be populated from JSON -->
            <div class="loading">Loading puzzles...</div>
        </div>
        
        <div class="pagination">
            <!-- 分页按钮将通过 JavaScript 动态添加 -->
        </div>
    </div>
    
    <!-- 问题模态框 -->
    <div id="questionModal" class="modal-overlay">
        <div class="modal-content">
            <button class="modal-close" onclick="closeQuestionModal()">×</button>
            <h3 class="modal-title" id="questionTitle">Question</h3>
            <div id="questionContent" class="preserve-newlines"></div>
        </div>
    </div>
    
    <!-- 模型答案模态框 -->
    <div id="modelModal" class="modal-overlay">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModelModal()">×</button>
            <h3 class="modal-title" id="modelTitle">Model Answer <span id="modelScore"></span></h3>
            <div id="modelContent" class="preserve-newlines"></div>
        </div>
    </div>

    <script>
        // Global variable to store the JSON data
        let taskData = null;
        
        // Fetch the JSON data
        async function fetchData() {
            try {
                const response = await fetch('task.json');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                taskData = await response.json();
                populatePage();
            } catch (error) {
                console.error('Error loading task data:', error);
                document.querySelectorAll('.loading').forEach(el => {
                    el.textContent = 'Error loading data. Please check console for details.';
                    el.style.color = 'red';
                });
            }
        }
        
        // Populate the page with data from the JSON
        function populatePage() {
            populateDifficultyScale();
            populateAccuracyScale();
            populateModelStats();
            populatePuzzles();
            setupPagination();
            setupDifficultyLabels();
            setupModelStats();
        }
        
        // Populate difficulty scale
        function populateDifficultyScale() {
            const container = document.getElementById('difficulty-scale');
            container.innerHTML = '';
            
            // Get difficulty levels from the JSON
            const difficultyLevels = taskData.difficulty_levels;
            const colorClasses = [
                'color: #f5f5f5;',
                'color: #b8e0b8;',
                'color: #8a88ff;',
                'color: #e8a49b;',
                'color: #ffaa66;',
                'color: #db7878;'
            ];
            
            let i = 0;
            for (const [range, description] of Object.entries(difficultyLevels)) {
                const item = document.createElement('div');
                item.className = 'scale-item';
                item.innerHTML = `
                    <div class="scale-color" style="${colorClasses[i] || ''}">⬤</div>
                    <div class="scale-label">${range}&nbsp;&nbsp;:</div>
                    <div class="scale-desc">${description}</div>
                `;
                container.appendChild(item);
                i++;
            }
        }
        
        // Populate accuracy scale
        function populateAccuracyScale() {
            const container = document.getElementById('accuracy-scale');
            container.innerHTML = '';
            
            // Get evaluation criteria from the JSON
            const evaluationCriteria = taskData.evaluation_criteria;
            const emojiMap = {
                'perfect': '🟢',
                'good': '🔵',
                'partial': '🟡',
                'poor': '🟠',
                'wrong': '🔴'
            };
            
            // Format the labels with proper capitalization and padding
            const labelMap = {
                'perfect': 'Perfect:',
                'good': 'Good&nbsp;&nbsp;&nbsp;:',
                'partial': 'Partial:',
                'poor': 'Poor&nbsp;&nbsp;&nbsp;:',
                'wrong': 'Wrong&nbsp;&nbsp;:'
            };
            
            for (const [level, description] of Object.entries(evaluationCriteria)) {
                const item = document.createElement('div');
                item.className = 'scale-item';
                item.innerHTML = `
                    <div class="scale-color">${emojiMap[level] || ''}</div>
                    <div class="scale-label">${labelMap[level] || level + ':'}</div>
                    <div class="scale-desc">${description}</div>
                `;
                container.appendChild(item);
            }
        }
        
        // Populate model statistics
        function populateModelStats() {
            const container = document.getElementById('model-stats');
            container.innerHTML = '';
            
            // Get models from the JSON
            const models = taskData.models;
            
            models.forEach(model => {
                const rankClass = model.rank === 1 ? 'rank-1st' : 
                                  model.rank === 2 ? 'rank-2nd' : 
                                  model.rank === 3 ? 'rank-3rd' : '';
                
                const stat = document.createElement('div');
                stat.className = `model-stat`;
                stat.innerHTML = `
                    <div class="model-name">${model.name}</div>
                    <div class="accuracy">${model.accuracy_percentage}%</div>
                    <div class="ratio">${model.correct_ratio} correct</div>
                    <div class="rank ${rankClass}">${model.rank}${model.rank === 1 ? 'st' : model.rank === 2 ? 'nd' : model.rank === 3 ? 'rd' : 'th'}</div>
                `;
                container.appendChild(stat);
            });
        }
        
        // Populate puzzles
        function populatePuzzles() {
            const container = document.getElementById('puzzles-container');
            container.innerHTML = '';
            
            // Get questions from the JSON
            const questions = taskData.questions;
            
            questions.forEach(question => {
                const puzzle = document.createElement('div');
                puzzle.className = 'puzzle-container';
                
                // Create the puzzle header
                const header = document.createElement('div');
                header.className = 'puzzle-header';
                header.onclick = function() { toggleExpand(this.nextElementSibling); };
                header.innerHTML = `
                    <span>${question.name}</span>
                    <span class="difficulty-label difficulty-${Math.floor(question.difficulty)}-${Math.round((question.difficulty % 1) * 10)}">Difficulty: ${question.difficulty}</span>
                `;
                
                // Create the puzzle content
                const content = document.createElement('div');
                content.className = 'puzzle-content';
                
                // Add the question
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                
                // Add the question preview
                const preview = document.createElement('div');
                preview.className = 'question-preview';
                preview.onclick = function() { showQuestionModal(this.nextElementSibling.innerHTML, question.name); };
                preview.innerHTML = `
                    <p>${question.short_description}</p>
                    <span class="see-more">Click to see full question</span>
                `;
                
                // Add the full question (hidden)
                const fullQuestion = document.createElement('div');
                fullQuestion.className = 'question-full';
                fullQuestion.style.display = 'none';
                fullQuestion.innerHTML = `<p>${question.full_description}</p>`;
                
                questionDiv.appendChild(preview);
                questionDiv.appendChild(fullQuestion);
                
                // Add the model answers
                const modelAnswers = document.createElement('div');
                modelAnswers.className = 'model-answers';
                
                // Add each model's answer
                question.answers.forEach(answer => {
                    const modelAnswer = document.createElement('div');
                    modelAnswer.className = 'model-answer';
                    
                    // Get emoji based on evaluation
                    const emoji = {
                        'perfect': '🟢',
                        'good': '🔵',
                        'partial': '🟡',
                        'poor': '🟠',
                        'wrong': '🔴'
                    }[answer.evaluation] || '⚪';
                    
                    const header = document.createElement('div');
                    header.className = 'model-header';
                    header.onclick = function() { showModelModal(answer.model, this.nextElementSibling.innerHTML, `${emoji} ${answer.score}`); };
                    header.innerHTML = `
                        <span>${answer.model}</span>
                        <div class="evaluation ${answer.evaluation}">
                            ${emoji} ${answer.score}
                        </div>
                    `;
                    
                    const content = document.createElement('div');
                    content.className = 'model-content';
                    content.style.display = 'none';
                    content.innerHTML = `<p>${answer.content}</p>`;
                    
                    modelAnswer.appendChild(header);
                    modelAnswer.appendChild(content);
                    modelAnswers.appendChild(modelAnswer);
                });
                
                content.appendChild(questionDiv);
                content.appendChild(modelAnswers);
                
                puzzle.appendChild(header);
                puzzle.appendChild(content);
                container.appendChild(puzzle);
            });
        }
        
        // 切换Puzzle内容的展开状态
        function toggleExpand(element) {
            element.classList.toggle('expanded');
        }
        
        // 问题模态框函数
        function showQuestionModal(content, title) {
            document.getElementById('questionTitle').textContent = title;
            document.getElementById('questionContent').innerHTML = content;
            document.getElementById('questionModal').classList.add('active');
            document.body.style.overflow = 'hidden';
        }
        
        function closeQuestionModal() {
            document.getElementById('questionModal').classList.remove('active');
            document.body.style.overflow = '';
        }
        
        // 模型答案模态框函数
        function showModelModal(model, content, score) {
            document.getElementById('modelTitle').innerHTML = model + ' <span class="evaluation">' + score + '</span>';
            document.getElementById('modelContent').innerHTML = content;
            document.getElementById('modelModal').classList.add('active');
            document.body.style.overflow = 'hidden';
        }
        
        function closeModelModal() {
            document.getElementById('modelModal').classList.remove('active');
            document.body.style.overflow = '';
        }
        
        // 点击模态框外部关闭
        window.onclick = function(event) {
            if (event.target.classList.contains('modal-overlay')) {
                event.target.classList.remove('active');
                document.body.style.overflow = '';
            }
        }
        
        // 计算器函数
        function calculate() {
            const taskTime = parseFloat(document.getElementById('taskTime').value);
            if (isNaN(taskTime) || taskTime < 1) {
                alert('Please enter a valid task time (at least 1 minute)');
                return;
            }

            let sigma = Math.max(0, Math.log(taskTime) / Math.log(6.3));
            let score = 60 + 15 * sigma;

            document.getElementById('avgTime').textContent = taskTime.toFixed(2) + ' minutes';
            document.getElementById('stdDev').textContent = sigma.toFixed(2) + 'σ';
            document.getElementById('modelScore').textContent = score.toFixed(2);
            
            document.getElementById('calculatorResult').classList.add('visible');
        }
        
        // Function to get the appropriate difficulty class for any value
        function getDifficultyClass(difficulty) {
            // Convert to number if it's a string
            const diffValue = parseFloat(difficulty);
            
            // Round to the nearest 0.5
            const roundedValue = Math.round(diffValue * 2) / 2;
            
            // Format to x-y where x is the whole number part and y is the decimal part * 10
            const wholePart = Math.floor(roundedValue);
            const decimalPart = Math.round((roundedValue - wholePart) * 10);
            
            return `difficulty-${wholePart}-${decimalPart}`;
        }
        
        
        // Function to get the appropriate stat class for accuracy percentage
        function getAccuracyClass(accuracy) {
            // Convert to number if it's a string and remove any % sign
            const numAccuracy = parseFloat(accuracy.toString().replace('%', ''));
            
            // Define the ranges
            if (numAccuracy === 100) return 'stat-100';
            if (numAccuracy >= 95) return 'stat-95-99';
            if (numAccuracy >= 90) return 'stat-90-94';
            if (numAccuracy >= 85) return 'stat-85-89';
            if (numAccuracy >= 80) return 'stat-80-84';
            if (numAccuracy >= 75) return 'stat-75-79';
            if (numAccuracy >= 70) return 'stat-70-74';
            if (numAccuracy >= 65) return 'stat-65-69';
            if (numAccuracy >= 60) return 'stat-60-64';
            if (numAccuracy >= 55) return 'stat-55-59';
            if (numAccuracy >= 50) return 'stat-50-54';
            if (numAccuracy >= 45) return 'stat-45-49';
            if (numAccuracy >= 40) return 'stat-40-44';
            if (numAccuracy >= 35) return 'stat-35-39';
            if (numAccuracy >= 30) return 'stat-30-34';
            if (numAccuracy >= 25) return 'stat-25-29';
            if (numAccuracy >= 20) return 'stat-20-24';
            if (numAccuracy >= 15) return 'stat-15-19';
            if (numAccuracy >= 10) return 'stat-10-14';
            if (numAccuracy >= 5) return 'stat-5-9';
            if (numAccuracy >= 1) return 'stat-1-4';
            return 'stat-0';  // 0%单独作为一类
        }

        
        // Update functions to apply the correct classes
        function setupDifficultyLabels() {
            const difficultyLabels = document.querySelectorAll('.difficulty-label');
            difficultyLabels.forEach(label => {
                const diffText = label.textContent.replace('Difficulty: ', '').trim();
                const diffValue = parseFloat(diffText);
                
                // Remove any existing difficulty class
                const classList = Array.from(label.classList);
                classList.forEach(className => {
                    if (className.startsWith('difficulty-') && className !== 'difficulty-label') {
                        label.classList.remove(className);
                    }
                });
                
                // Add the appropriate class
                label.classList.add(getDifficultyClass(diffValue));
            });
        }
        
        function setupModelStats() {
            const modelStats = document.querySelectorAll('.model-stat');
            modelStats.forEach(stat => {
                const accuracyElem = stat.querySelector('.accuracy');
                if (accuracyElem) {
                    const accuracy = parseFloat(accuracyElem.textContent);
                    
                    // Remove any existing stat class
                    const classList = Array.from(stat.classList);
                    classList.forEach(className => {
                        if (className.startsWith('stat-') && className !== 'model-stat') {
                            stat.classList.remove(className);
                        }
                    });
                    
                    // Add the appropriate class
                    stat.classList.add(getAccuracyClass(accuracy));
                }
            });
        }
        
        // 分页功能
        function setupPagination() {
            const puzzlesPerPage = 4; // 每页显示 4 个Puzzle
            const puzzles = document.querySelectorAll('.puzzle-container');
            const pageCount = Math.ceil(puzzles.length / puzzlesPerPage);
            
            // 根据Puzzle数量生成分页按钮
            const pagination = document.querySelector('.pagination');
            pagination.innerHTML = ''; // 清空现有按钮
            for (let i = 1; i <= pageCount; i++) {
                const btn = document.createElement('button');
                btn.className = 'page-btn' + (i === 1 ? ' active' : '');
                btn.textContent = i;
                btn.onclick = function() {
                    document.querySelectorAll('.page-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    showPage(parseInt(this.textContent));
                };
                pagination.appendChild(btn);
            }
            
            // 显示指定页面上的Puzzle
            function showPage(pageNum) {
                const startIndex = (pageNum - 1) * puzzlesPerPage;
                const endIndex = startIndex + puzzlesPerPage;
                
                puzzles.forEach((puzzle, index) => {
                    if (index >= startIndex && index < endIndex) {
                        puzzle.style.display = 'block';
                    } else {
                        puzzle.style.display = 'none';
                    }
                });
            }
            
            // 初始化显示第一页
            showPage(1);
        }

        // 下载按钮
        document.getElementById('download-csv').addEventListener('click', function(e) {
            e.preventDefault();
            if (taskData) {
                // Implementation for CSV download
                alert('CSV download started');
                // TODO: Implement actual CSV download
            } else {
                alert('Data not loaded yet. Please wait and try again.');
            }
        });
        
        document.getElementById('download-json').addEventListener('click', function(e) {
            e.preventDefault();
            if (taskData) {
                // Implementation for JSON download
                const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(taskData, null, 2));
                const downloadAnchorNode = document.createElement('a');
                downloadAnchorNode.setAttribute("href", dataStr);
                downloadAnchorNode.setAttribute("download", "task_data.json");
                document.body.appendChild(downloadAnchorNode);
                downloadAnchorNode.click();
                downloadAnchorNode.remove();
            } else {
                alert('Data not loaded yet. Please wait and try again.');
            }
        });
        
        // 页面加载时初始化
        document.addEventListener('DOMContentLoaded', function() {
            fetchData();
        });
    </script>
</body>
</html>
